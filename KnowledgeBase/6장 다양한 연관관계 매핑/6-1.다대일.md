# ğŸ‘¨â€ğŸ‘©â€ğŸ‘¦ ë‹¤ëŒ€ì¼

- [1. ë‹¤ëŒ€ì¼ ë‹¨ë°©í–¥ [N:1]](#1-ë‹¤ëŒ€ì¼-ë‹¨ë°©í–¥-n1)
- [2. ë‹¤ëŒ€ì¼ ì–‘ë°©í–¥ [N:1, 1:N]](#2-ë‹¤ëŒ€ì¼-ì–‘ë°©í–¥-n1-1n)

<font color="lightgreen">ë‹¤ëŒ€ì¼</font> ê´€ê³„ì˜ ë°˜ëŒ€ ë°©í–¥ì€ í•­ìƒ <font color="skyblue">ì¼ëŒ€ë‹¤</font> ê´€ê³„ê³    
<font color="skyblue">ì¼ëŒ€ë‹¤</font> ê´€ê³„ì˜ ë°˜ëŒ€ ë°©í–¥ì€ í•­ìƒ <font color="lightgreen">ë‹¤ëŒ€ì¼</font> ê´€ê³„ë‹¤.   
ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”ì˜ ì¼(1),ë‹¤(N) ê´€ê³„ì—ì„œ ì™¸ë˜í‚¤ëŠ” í•­ìƒ 'ë‹¤'ìª½ì— ìˆë‹¤.   
ë”°ë¼ì„œ ê°ì²´ ì–‘ë°©í–¥ ê´€ê³„ì—ì„œ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì€ í•­ìƒ 'ë‹¤'ìª½ì´ë‹¤.   
ì˜ˆ) íšŒì›(N)ê³¼ íŒ€(1)ì´ ìˆìœ¼ë©´ íšŒì› ìª½ì´ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì´ë‹¤.   

## 1. ë‹¤ëŒ€ì¼ ë‹¨ë°©í–¥ [N:1]   
```java
//íšŒì› ì—”í‹°í‹°
@Entity
public class Member{
    @Id
    @GeneratedValue
    @Column(name = "MEMBER_ID")
    private String id;
    
    private String username;

    @ManyToOne
    @JoinColumn(name = "TEAM_ID")
    private Team team;
    
    //Getter, Setter...
}
```
```java
//íŒ€ ì—”í‹°í‹°
@Entity
public class Team{
    @Id
    @GeneratedValue
    @Column(name = "TEAM_ID")
    private String id;

    private String name;

    //Getter, Setter...
}
```
íšŒì›ì€ `Member.team`ìœ¼ë¡œ íŒ€ ì—”í‹°í‹°ë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆì§€ë§Œ ë°˜ëŒ€ë¡œ íŒ€ì—ëŠ” íšŒì›ì„ ì°¸ì¡°í•˜ëŠ” í•„ë“œê°€ ì—†ë‹¤.   
ë”°ë¼ì„œ íšŒì›ê³¼ íŒ€ì€ ë‹¤ëŒ€ì¼ ë‹¨ë°©í–¥ ì—°ê´€ê´€ê³„ë‹¤.   
```java
@ManyToOne
@JoinColumn(name = "TEAM_ID")
private Team team;
```
`@JoinColumn(name = "TEAM_ID")`ë¥¼ ì‚¬ìš©í•´ `Member.team`í•„ë“œë¥¼ `TEAM_ID` ì™¸ë˜í‚¤ì™€ ë§¤í•‘í–ˆë‹¤.   
ë”°ë¼ì„œ `Member.team` í•„ë“œë¡œ íšŒì› í…Œì´ë¸”ì˜ `TEAM_ID` ì™¸ë˜í‚¤ë¥¼ ê´€ë¦¬í•œë‹¤.   

## 2. ë‹¤ëŒ€ì¼ ì–‘ë°©í–¥ [N:1, 1:N]   
ë‹¤ëŒ€ì¼ ì–‘ë°©í–¥ì˜ ê°ì²´ ì—°ê´€ê´€ê³„ì—ì„œ   
ì‹¤ì„ ì´ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸(`Member.team`)ì´ê³  ì ì„ (`Team.members`)ì€ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì´ ì•„ë‹ˆë‹¤.   
<p align="center"><img src="https://velog.velcdn.com/post-images%2Fconatuseus%2F45e11110-f018-11e9-88be-716a4713585f%2Fimage.png" width="60%"></p>   

```java
//íšŒì› ì—”í‹°í‹°
@Entity
public class Member{
    @Id
    @GeneratedValue
    @Column(name = "MEMBER_ID")
    private String id;
    
    private String username;

    @ManyToOne
    @JoinColumn(name = "TEAM_ID")
    private Team team;
    
    public void setTeam(Team team){
        this.team = team;

        //ë¬´í•œë£¨í”„ì— ë¹ ì§€ì§€ ì•Šë„ë¡ ì²´í¬
        if(!team.getMembers().contains(this)){
            team.getMembers().add(this);
        }
    }
}
```
```java
//íŒ€ ì—”í‹°í‹°
@Entity
public class Team{
    @Id
    @GeneratedValue
    @Column(name = "TEAM_ID")
    private String id;

    private String name;

    @OneToMany(mappedBy = "team")
    private List<Member> members = new ArrayList<Member>();

    public void addMember(Member member){
        this.members.add(member);

        //ë¬´í•œë£¨í”„ì— ë¹ ì§€ì§€ ì•Šë„ë¡ ì²´í¬
        if(member.getTeam() != this){
            member.setTeam(this);
        }
    }
}
```
### ì–‘ë°©í–¥ì€ ì™¸ë˜í‚¤ê°€ ìˆëŠ” ìª½ì´ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì´ë‹¤.   
- ì¼ëŒ€ë‹¤ì™€ ë‹¤ëŒ€ì¼ ì—°ê´€ê´€ê³„ëŠ” í•­ìƒ 'ë‹¤(N)'ì— ì™¸ë˜í‚¤ê°€ ìˆë‹¤.   
- ì—¬ê¸°ì„œëŠ” 'ë‹¤'ìª½ì¸ `MEMBER` í…Œì´ë¸”ì´ ì™¸ë˜í‚¤ë¥¼ ê°€ì§€ê³  ìˆìœ¼ë¯€ë¡œ `Member.team`ì´ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì´ë‹¤.   
- JPAëŠ” ì™¸ë˜í‚¤ë¥¼ ê´€ë¦¬í•  ë•Œ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ë§Œ ì‚¬ìš©í•œë‹¤.   
- ì£¼ì¸ì´ ì•„ë‹Œ `Team.members`ëŠ” ì¡°íšŒë¥¼ ìœ„í•œ JPQLì´ë‚˜ ê°ì²´ ê·¸ë˜í”„ë¥¼ íƒìƒ‰í•  ë•Œ ì‚¬ìš©í•œë‹¤.   

### ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ëŠ” í•­ìƒ ì„œë¡œë¥¼ ì°¸ì¡°í•´ì•¼ í•œë‹¤.   
- ì–´ëŠ í•œ ìª½ë§Œ ì°¸ì¡°í•˜ë©´ ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ê°€ ì„±ë¦½í•˜ì§€ ì•ŠëŠ”ë‹¤.   
- í•­ìƒ ì„œë¡œ ì°¸ì¡°í•˜ê²Œ í•˜ë ¤ë©´ ì—°ê´€ê´€ê³„ í¸ì˜ ë©”ì„œë“œë¥¼ ë§Œë“œëŠ” ê²ƒì´ ì¢‹ë‹¤.   
(íšŒì›ì˜ `setTeam()`, íŒ€ì˜ `addMember()`)   
- í¸ì˜ ë©”ì†Œë“œëŠ” í•œ ê³³ì—ë§Œ ì‘ì„±í•˜ê±°ë‚˜ ì–‘ìª½ ë‹¤ ì‘ì„±í•  ìˆ˜ ìˆëŠ”ë°,   
ì–‘ìª½ì— ë‹¤ ì‘ì„±í•˜ë©´ ë¬´í•œë£¨í”„ì— ë¹ ì§€ë¯€ë¡œ ì£¼ì˜í•´ì•¼ í•œë‹¤.   